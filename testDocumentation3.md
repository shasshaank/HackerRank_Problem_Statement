Test Case SpecificationIntelligent Audit Trail SystemCoverage MatrixIDTitleTypePriorityEdge CaseTC-01User Creation AuditFunctionalP0NoTC-02Update with Diff LoggingFunctionalP0NoTC-03Optimistic Locking ConflictConcurrencyP0YesTC-04Soft Delete LogicFunctionalP0NoTC-05Rollback to Previous VersionLogicP0YesTC-06Middleware User TrackingSecurityP1NoTC-07Invalid Rollback TargetValidationP1YesTC-08Soft Delete ExclusionLogicP1YesTC-09Version Increment CheckFunctionalP1NoTC-10Invalid Role ValidationValidationP2NoCoverage: 10 test cases | Functional: 4 | Logic: 2 | Concurrency: 1 | Security: 1 | Validation: 2Test CasesTC-01: User Creation AuditFieldValueTypeFunctionalPurposeVerify user creation automatically creates a corresponding audit logInputPOST /api/users/  {"email": "test@test.com", "name": "Test User", "role": "USER", "department": "IT"}Expected1. API returns 201 Created.  2. User record created with version=1.  3. AuditLog table has 1 entry with action="CREATE" and matching object_id.Status Code201ValidatesBasic Signal/Model hook implementationTC-02: Update with Diff LoggingFieldValueTypeFunctionalPurposeVerify updates increment version and calculate JSON diff correctlyInputPUT /api/users/{id}/  {"name": "Updated Name", "version": 1}StateOriginal Name: "Old Name". Current Version: 1.Expected1. API returns 200 OK.  2. User version increments to 2.  3. AuditLog entry created with diff={"name": {"old": "Old Name", "new": "Updated Name"}}.Status Code200ValidatesDiff calculation logic and versioningTC-03: Optimistic Locking ConflictFieldValueTypeConcurrencyPurposeVerify the system prevents updates when the client has stale dataInputPUT /api/users/{id}/  {"name": "Hacker", "version": 1}StateCurrent DB Version: 2 (Data was modified by another process).ExpectedAPI returns 409 Conflict. No changes applied to DB.Status Code409ValidatesConcurrency control (Lost Update Prevention)TC-04: Soft Delete LogicFieldValueTypeFunctionalPurposeVerify DELETE request performs a logical delete, not physicalInputDELETE /api/users/{id}/Expected1. API returns 204 No Content.  2. Record exists in DB but is_deleted=True.  3. AuditLog exists with action="DELETE".Status Code204ValidatesSoft delete logic and audit signal triggeringTC-05: Rollback to Previous VersionFieldValueTypeLogicPurposeVerify data can be reverted to a specific previous versionInputPOST /api/users/{id}/rollback/  {"target_version": 1}StateCurrent Version: 3. Target Version: 1.Expected1. User fields revert to Version 1 values.  2. Version increments to 4 (History moves forward, never back).  3. AuditLog exists with action="ROLLBACK".Status Code200ValidatesHistory traversal and restoration logicTC-06: Middleware User TrackingFieldValueTypeSecurityPurposeVerify the system tracks WHO made the change via MiddlewareInputPerform PUT /api/users/{id}/ authenticated as "admin_user"ExpectedThe resulting AuditLog entry has changed_by="admin_user".Status Code200ValidatesContext passing (Middleware/Thread-Local Storage to Signal)TC-07: Invalid Rollback TargetFieldValueTypeValidationPurposeVerify validation for non-existent versionsInputPOST /api/users/{id}/rollback/  {"target_version": 99}StateMax Version is 3.ExpectedRequest rejected with a clear error message.Status Code400ValidatesInput validation and audit history bounds checkingTC-08: Soft Delete ExclusionFieldValueTypeLogicPurposeVerify AuditedManager excludes deleted rows from standard queriesInputGET /api/users/StateOne active user, one soft-deleted user.ExpectedResponse list includes only the active user.Status Code200ValidatesCustom Manager get_queryset implementationTC-09: Version Increment CheckFieldValueTypeFunctionalPurposeVerify version strictly increments on every saveInputCreate User -> Update User -> Soft Delete UserExpectedVersion sequence: 1 -> 2 -> 3.Status Code200/204ValidatesVersion control integrityTC-10: Invalid Role ValidationFieldValueTypeValidationPurposeVerify role field only accepts valid choicesInputPOST /api/users/  {"role": "SUPER_ADMIN"}Expected{"role": ["Invalid choice"]}Status Code400ValidatesModel field validationValidation RulesFieldRuleError Message (Not checked)emailValid format, Unique"Invalid email" / "Email already exists"roleUSER, MANAGER, ADMIN"Invalid choice"target_versionMust exist for object"Target version not found"Test ExecutionPhase 1 (Core): TC-01, TC-02, TC-04, TC-09Phase 2 (Edge): TC-07, TC-08, TC-10Phase 3 (Advanced): TC-03, TC-05, TC-06Pass Criteria: Minimum 7/10 test cases must passExcellent: 10/10 test cases pass with efficient implementationScoring RubricCategoryPointsCriteriaCore Audit Logic30TC-01, TC-02, TC-04 pass. Signals work correctly.System Architecture25Middleware correctly handles thread-local user storage (TC-06).Concurrency20TC-03 passes (Optimistic Locking).Complex Logic15TC-05 passes (Rollback implementation).Code Quality10Clean separation of Signals, Models, and Views.Total: 100 points
